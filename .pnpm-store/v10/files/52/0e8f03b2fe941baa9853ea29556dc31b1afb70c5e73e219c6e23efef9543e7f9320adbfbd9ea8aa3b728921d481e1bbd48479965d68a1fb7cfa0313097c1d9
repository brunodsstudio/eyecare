import{router as Se}from"@inertiajs/core";import{createHeadManager as j,router as T}from"@inertiajs/core";import{computed as F,reactive as E}from"vue";import{router as v}from"@inertiajs/core";var S={created(){if(!this.$options.remember||this.$isServer)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,t=v.restore(e),r=this.$options.remember.data.filter(s=>!(this[s]!==null&&typeof this[s]=="object"&&this[s].__rememberable===!1)),l=s=>this[s]!==null&&typeof this[s]=="object"&&typeof this[s].__remember=="function"&&typeof this[s].__restore=="function";r.forEach(s=>{this[s]!==void 0&&t!==void 0&&t[s]!==void 0&&(l(s)?this[s].__restore(t[s]):this[s]=t[s]),this.$watch(s,()=>{v.remember(r.reduce((p,c)=>({...p,[c]:l(c)?this[c].__remember():this[c]}),{}),e)},{immediate:!0,deep:!0})})}};import{router as y}from"@inertiajs/core";import f from"lodash.clonedeep";import k from"lodash.isequal";import{reactive as $,watch as A}from"vue";function b(...e){let t=typeof e[0]=="string"?e[0]:null,r=(typeof e[0]=="string"?e[1]:e[0])||{},l=t?y.restore(t):null,s=typeof r=="object"?f(r):f(r()),p=null,c=null,d=o=>o,u=$({...l?l.data:f(s),isDirty:!1,errors:l?l.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(s).reduce((o,n)=>(o[n]=this[n],o),{})},transform(o){return d=o,this},defaults(o,n){if(typeof r=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof o>"u"?(s=this.data(),this.isDirty=!1):s=Object.assign({},f(s),n?{[o]:n}:o),this},reset(...o){let n=typeof r=="object"?f(s):f(r()),i=f(n);return o.length===0?(s=i,Object.assign(this,n)):Object.keys(n).filter(m=>o.includes(m)).forEach(m=>{s[m]=i[m],this[m]=n[m]}),this},setError(o,n){return Object.assign(this.errors,n?{[o]:n}:o),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...o){return this.errors=Object.keys(this.errors).reduce((n,i)=>({...n,...o.length>0&&!o.includes(i)?{[i]:this.errors[i]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(o,n,i={}){let m=d(this.data()),h={...i,onCancelToken:a=>{if(p=a,i.onCancelToken)return i.onCancelToken(a)},onBefore:a=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(c),i.onBefore)return i.onBefore(a)},onStart:a=>{if(this.processing=!0,i.onStart)return i.onStart(a)},onProgress:a=>{if(this.progress=a,i.onProgress)return i.onProgress(a)},onSuccess:async a=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,c=setTimeout(()=>this.recentlySuccessful=!1,2e3);let I=i.onSuccess?await i.onSuccess(a):null;return s=f(this.data()),this.isDirty=!1,I},onError:a=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(a),i.onError)return i.onError(a)},onCancel:()=>{if(this.processing=!1,this.progress=null,i.onCancel)return i.onCancel()},onFinish:a=>{if(this.processing=!1,this.progress=null,p=null,i.onFinish)return i.onFinish(a)}};o==="delete"?y.delete(n,{...h,data:m}):y[o](n,m,h)},get(o,n){this.submit("get",o,n)},post(o,n){this.submit("post",o,n)},put(o,n){this.submit("put",o,n)},patch(o,n){this.submit("patch",o,n)},delete(o,n){this.submit("delete",o,n)},cancel(){p&&p.cancel()},__rememberable:t===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(o){Object.assign(this,o.data),this.setError(o.errors)}});return A(u,o=>{u.isDirty=!k(u.data(),s),t&&y.remember(f(o.__remember()),t)},{immediate:!0,deep:!0}),u}var g={},P=null,D={name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:[Object,Function,String],required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},data(){return{component:this.initialComponent||null,page:this.initialPage,key:null}},created(){g=this,P=j(this.$isServer,this.titleCallback,this.onHeadUpdate),this.$isServer||(T.init({initialPage:this.initialPage,resolveComponent:this.resolveComponent,swapComponent:async({component:e,page:t,preserveState:r})=>{this.component=e,this.page=t,this.key=r?this.key:Date.now()}}),T.on("navigate",()=>P.forceUpdate()))},render(e){if(this.component){let t=e(this.component,{key:this.key,props:this.page.props,scopedSlots:this.$scopedSlots});return this.component.layout?typeof this.component.layout=="function"?this.component.layout(e,t):Array.isArray(this.component.layout)?this.component.layout.concat(t).reverse().reduce((r,l)=>e(l,{props:this.page.props},[r])):e(this.component.layout,{props:this.page.props},[t]):t}}},C=D,O={install(e){T.form=b,e.mixin(S),e.mixin({beforeCreate(){Object.defineProperty(this,"$headManager",{get:function(){return P}}),Object.defineProperty(this,"$inertia",{get:function(){return T}}),Object.defineProperty(this,"$page",{get:function(){return g.page}})}})}};function w(){return E({props:F(()=>g.page.props),url:F(()=>g.page.url),component:F(()=>g.page.component),version:F(()=>g.page.version)})}import{setupProgress as H}from"@inertiajs/core";async function x({id:e="app",resolve:t,setup:r,title:l,progress:s={},page:p,render:c}){let d=typeof window>"u",u=d?null:document.getElementById(e),o=p||JSON.parse(u.dataset.page),n=h=>Promise.resolve(t(h)).then(a=>a.default||a),i=[],m=await n(o.component).then(h=>r({el:u,App:C,props:{attrs:{id:e,"data-page":JSON.stringify(o)},props:{initialPage:o,initialComponent:h,resolveComponent:n,titleCallback:l,onHeadUpdate:d?a=>i=a:null}},plugin:O}));if(!d&&s&&H(s),d)return c(m).then(h=>({head:i,body:h}))}var _={props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeDestroy(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.tag)>-1},renderTagStart(e){this.ensureNodeHasAttrs(e);let t=Object.keys(e.data.attrs).reduce((r,l)=>{let s=e.data.attrs[l];return l==="head-key"?r:s===""?r+` ${l}`:r+` ${l}="${s}"`},"");return`<${e.tag}${t}>`},renderTagChildren(e){return e.children.reduce((t,r)=>t+this.renderTag(r),"")},renderTag(e){if(!e.tag)return e.text;let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.tag}>`),t},ensureNodeHasAttrs(e){e.data={...e.data||{},attrs:{...(e.data||{}).attrs||{}}}},ensureNodeHasInertiaAttribute(e){return this.ensureNodeHasAttrs(e),e.data.attrs.inertia=e.data.attrs["head-key"]!==void 0?e.data.attrs["head-key"]:"",e},renderNode(e){return this.ensureNodeHasInertiaAttribute(e),this.renderTag(e)},renderNodes(e){let t=e.map(r=>this.renderNode(r)).filter(r=>r);return this.title&&!t.find(r=>r.startsWith("<title"))&&t.push(`<title inertia>${this.title}</title>`),t}},render(){this.provider.update(this.renderNodes(this.$scopedSlots.default?this.$scopedSlots.default():[]))}},L=_;import{mergeDataIntoQueryString as N,router as M,shouldIntercept as V}from"@inertiajs/core";var q={functional:!0,props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"}},render(e,{props:t,data:r,children:l}){r.on={click:()=>({}),cancelToken:()=>({}),start:()=>({}),progress:()=>({}),finish:()=>({}),cancel:()=>({}),success:()=>({}),error:()=>({}),...r.on||{}};let s=t.as.toLowerCase(),p=t.method.toLowerCase(),[c,d]=N(p,t.href||"",t.data,t.queryStringArrayFormat);return s==="a"&&p!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${c}" method="${p}" as="button">...</Link>`),e(t.as,{...r,attrs:{...r.attrs,...s==="a"?{href:c}:{}},on:{...r.on,click:u=>{r.on.click(u),V(u)&&(u.preventDefault(),M.visit(c,{data:d,method:p,replace:t.replace,preserveScroll:t.preserveScroll,preserveState:t.preserveState??p!=="get",only:t.only,except:t.except,headers:t.headers,onCancelToken:r.on.cancelToken,onBefore:r.on.before,onStart:r.on.start,onProgress:r.on.progress,onFinish:r.on.finish,onCancel:r.on.cancel,onSuccess:r.on.success,onError:r.on.error}))}}},l)}},B=q;export{L as Head,B as Link,x as createInertiaApp,Se as router,b as useForm,w as usePage};
//# sourceMappingURL=index.esm.js.map
